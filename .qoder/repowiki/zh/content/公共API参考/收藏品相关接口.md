# 收藏品相关接口

<cite>
**本文档中引用的文件**
- [public.ts](file://src/apis/maimai/public.ts)
- [models.ts](file://src/apis/maimai/models.ts)
- [types/public.ts](file://src/apis/maimai/types/public.ts)
</cite>

## 目录
1. [简介](#简介)
2. [核心接口说明](#核心接口说明)
3. [类型定义与数据结构](#类型定义与数据结构)
4. [接口调用示例](#接口调用示例)
5. [设计目标与使用场景](#设计目标与使用场景)

## 简介
`maimai.public` 命名空间提供了用于获取收藏品类别相关信息的一组只读公共 API 接口。这些接口允许客户端获取奖杯、头像、姓名框和边框等收藏品的分类元数据及具体内容，支持前端实现收藏进度追踪和图鉴浏览功能。所有接口均无需认证，适合集成至用户个人中心或社区展示页面。

**Section sources**
- [public.ts](file://src/apis/maimai/public.ts#L0-L102)

## 核心接口说明
以下四个方法构成了收藏品类别的核心接口集合：

### getCollectionList
该方法用于获取指定收藏品类别的概览列表，例如奖杯、头像、姓名框或边框。返回结果包含该类别下所有条目的基本信息。

- **URL路径**: `/api/maimai/{trophy|icon|plate|frame}/list`
- **参数支持**:
  - `version`: 可选，指定版本号。
  - `required`: 可选，布尔值，默认为 `false`，表示是否包含曲目需求信息。
- **返回值**: 指定类别的收藏品列表（`Collection[]`）。

[SPEC SYMBOL](file://src/apis/maimai/public.ts#L47-L69)

### getCollectionInfo
此方法用于获取特定收藏品的详细信息，通过提供收藏品类型和 ID 来查询具体条目及其状态。

- **URL路径**: `/api/maimai/{trophy|icon|plate|frame}/{id}`
- **参数支持**:
  - `version`: 可选，指定版本号。
- **返回值**: 单个收藏品的完整信息（`Collection` 对象）。

[SPEC SYMBOL](file://src/apis/maimai/public.ts#L70-L84)

### getCollectionGenreList
该方法返回所有收藏品分类的元数据列表，包括每个分类的图标、名称等信息。

- **URL路径**: `/api/maimai/collection-genre/list`
- **参数支持**:
  - `version`: 可选，指定版本号。
- **返回值**: 收藏品分类列表（`CollectionGenre[]`）。

[SPEC SYMBOL](file://src/apis/maimai/public.ts#L85-L96)

### getCollectionGenreInfo
此方法用于获取某个特定收藏品分类的完整定义，包括其 ID、标题和日文流派名称。

- **URL路径**: `/api/maimai/collection-genre/{id}`
- **参数支持**:
  - `version`: 可选，指定版本号。
- **返回值**: 特定分类的详细信息（`CollectionGenre` 对象）。

[SPEC SYMBOL](file://src/apis/maimai/public.ts#L97-L102)

**Section sources**
- [public.ts](file://src/apis/maimai/public.ts#L47-L102)

## 类型定义与数据结构
相关接口依赖于 `models.ts` 和 `types/public.ts` 中定义的核心类型。

### Collection
代表一个收藏品的基本结构，包含以下字段：
- `id`: 收藏品唯一标识符。
- `name`: 收藏品名称。
- `color`: 称号颜色（仅适用于称号类收藏品）。
- `description`: 收藏品说明。
- `genre`: 分类（日文）。
- `required`: 收集要求列表。

[SPEC SYMBOL](file://src/apis/maimai/models.ts#L131-L150)

### CollectionGenre
描述收藏品分类的元数据：
- `id`: 分类 ID。
- `title`: 分类标题。
- `genre`: 日文分类名称。

[SPEC SYMBOL](file://src/apis/maimai/models.ts#L167-L170)

### CollectionList 与 CollectionGenreList
分别对应多个收藏品和分类的集合类型，由 `types/public.ts` 定义为部分记录类型和数组结构。

[SPEC SYMBOL](file://src/apis/maimai/types/public.ts#L24-L31)

**Section sources**
- [models.ts](file://src/apis/maimai/models.ts#L131-L170)
- [types/public.ts](file://src/apis/maimai/types/public.ts#L24-L31)

## 接口调用示例
以下是链式调用的实际使用示例，演示如何先获取分类列表，再拉取具体内容：

```ts
const client = new LxnsApiClient();

// 第一步：获取所有收藏品分类
const genres = await client.maimai.public.getCollectionGenreList();
console.log(genres.collectionGenres);

// 第二步：选择第一个分类并获取其下的奖杯列表
const firstGenreId = genres.collectionGenres[0].id;
const trophies = await client.maimai.public.getCollectionList('trophy', { version: 1 });
console.log(trophies);

// 第三步：获取某一个奖杯的详细信息
const trophyDetail = await client.maimai.public.getCollectionInfo('trophy', 1001);
console.log(trophyDetail);
```

上述代码展示了如何逐步从分类到具体内容进行数据加载，适用于构建动态图鉴页面。

**Section sources**
- [public.ts](file://src/apis/maimai/public.ts#L47-L102)

## 设计目标与使用场景
这些接口的设计目标是为前端提供完整的收藏品数据支持，便于实现以下功能：
- **收藏进度追踪**：通过 `getCollectionList` 获取用户已获得的收藏品，并结合 `required` 字段判断完成度。
- **图鉴浏览**：利用 `getCollectionGenreList` 和 `getCollectionGenreInfo` 构建分类导航，再通过 `getCollectionList` 展示各分类下的具体内容。
- **静态展示页面**：由于所有接口均为只读且无需认证，非常适合用于社区网站、粉丝页面等公开展示场景。

此外，接口设计遵循 RESTful 风格，路径清晰，参数灵活，便于缓存和性能优化。

**Section sources**
- [public.ts](file://src/apis/maimai/public.ts#L47-L102)